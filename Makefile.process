# FOSSology Makefile - Makefile.process
# Copyright (C) 2008 Hewlett-Packard Development Company, L.P.
# This Makefile is included by other Makefiles in the tree that need
# these targets in order to preprocess files with embedded references
# to the variables in Makefile.conf
include Makefile.conf

VARIABLES := PROJECT VERSION PROJECTUSER PROJECTGROUP DESTDIR PREFIX BINDIR SBINDIR SYSCONFDIR LIBDIR INCLUDEDIR LIBEXECDIR DATAROOTDIR DATADIR LOCALSTATEDIR PROJECTSTATEDIR MANDIR MAN1DIR DOCDIR WEBDIR PHPDIR AGENTDIR AGENTDATADIR AGENTSTATEDIR AGENTCHECKDDIR AGENTTESTDDIR SVN_REV

preprocess-%: %.in variable.list
	@echo "Generate $* ..."
	utils/preprocess $< > $*

variable.list: Makefile.conf
	$(MAKE) -f Makefile.process $(VARIABLES)
	echo in variable.list

$(VARIABLES):
	if [ "$@" = "PROJECT" ]; then \
	   echo "$@=\"$($@)\"" >variable.list; \
	else \
	  echo "$@=\"$($@)\"" >>variable.list; \
	fi

.PHONY: $(VARIABLES)
